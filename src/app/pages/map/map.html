<div class="toolbar">
  <div class="left">
    <b>Carte GPS</b>
    <span class="status">MQTT: {{ status$ | async }}</span>
  </div>

  <div class="right">
    <button mat-stroked-button (click)="play()" [disabled]="playing || !hasTrajectory">▶ Play</button>
    <button mat-stroked-button (click)="pause()" [disabled]="!playing">⏸ Pause</button>
    <button mat-stroked-button (click)="stopReplay()" [disabled]="!hasTrajectory">⏹ Stop</button>

    <mat-button-toggle-group
      [value]="speed"
      (valueChange)="setSpeed($event)"
      aria-label="Speed"
    >
      <mat-button-toggle [value]="1">x1</mat-button-toggle>
      <mat-button-toggle [value]="2">x2</mat-button-toggle>
      <mat-button-toggle [value]="5">x5</mat-button-toggle>
    </mat-button-toggle-group>
  </div>
</div>

<div class="hint" *ngIf="!hasTrajectory">
  <b>Trajectoire non visible :</b> il faut au moins <b>2 points GPS différents</b> dans l’historique.
  <span class="muted">(Si tes points sont identiques, la ligne est “invisible”.)</span>
</div>

<app-fleet-map
  class="map-host"
  [follow]="true"
  [selected]="selected"
  [history]="history"
  [devices]="devices">
</app-fleet-map>
